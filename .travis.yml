language: minimal

dist: focal

sudo: required

addons:
  apt:
    packages:
      - bc
      - bison
      - build-essential
      - ccache
      - curl
      - flex
      - g++-multilib
      - gcc-multilib
      - git
      - git-lfs
      - gnupg
      - gperf
      - imagemagick
      - lib32ncurses5-dev
      - lib32readline-dev
      - lib32z1-dev
      - liblz4-tool
      - libncurses5
      - libncurses5-dev
      - libsdl1.2-dev
      - libssl-dev
      - libwxgtk3.0-gtk3-dev
      - libxml2
      - libxml2-utils
      - lzop
      - pngcrush
      - rsync
      - schedtool
      - squashfs-tools
      - xsltproc
      - zip
      - zlib1g-dev

before_install:
  # Setup git-lfs
  - git lfs install
  
install:
  # Initialize the repo for crDroid 14.0 with Git LFS
  - repo init -u https://github.com/crdroidandroid/android.git -b 14.0 --git-lfs
  # Sync the repo
  - repo sync -j$(nproc) --force-sync

before_script:
  # Setup ccache
  - export USE_CCACHE=1
  - ccache -M 50G
  
script:
  # Start the build process (you'll need to replace 'target_device' with your device codename)
  - . build/envsetup.sh
  - lunch lineage_target_device-userdebug
  - mka bacon

cache:
  directories:
    - $HOME/.ccache
    - $HOME/.repo

notifications:
  email:
    recipients:
      - your-email@example.com
    on_success: always
    on_failure: always
